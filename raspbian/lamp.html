<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Raspbian安装Apache2/PHP5/MySQL5 | 乐高</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.5.0">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
        
    
    
    <link rel="next" href="../raspbian/android.html" />
    
    
    <link rel="prev" href="../raspbian/login.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-level="5.3" data-basepath=".." data-revision="1455521339033">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	    
            <li>
                <a href="https://github.com/178518" target="blank" class="custom-link">178518&#39;s Github</a>
            </li>
    	
    	

        
        <li class="divider"></li>
        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="aboutMe.html">
            
                
                    <a href="../aboutMe.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         关于我
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="f2e.html">
            
                
                    <a href="../f2e.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         前端
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="f2e/book.html">
            
                
                    <a href="../f2e/book.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         前端工程化
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="f2e/site.html">
            
                
                    <a href="../f2e/site.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         前端网址导航
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="android/android4.4.html">
            
                
                    <a href="../android/android4.4.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         SM-900V Note3升级4.4
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="android/android5.1.html">
            
                
                    <a href="../android/android5.1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                         SM-900V Note3升级5.1
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5" data-path="android/debugger.html">
            
                
                    <a href="../android/debugger.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                         MAC开发 Android USB 真机调试
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.6" data-path="git.html">
            
                
                    <a href="../git.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                         Git 使用帮助
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.7" data-path="help.html">
            
                
                    <a href="../help.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                         GitBook使用帮助
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="2016/node.html">
            
                
                    <a href="../2016/node.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         基本安装
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="2016/setup.html">
            
                
                    <a href="../2016/setup.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         环境配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2" data-path="2016/npm.html">
            
                
                    <a href="../2016/npm.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                         NPM模块发布
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.3" data-path="2016/study.html">
            
                
                    <a href="../2016/study.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                         React Native资料
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="2016/jiagou.html">
            
                
                    <a href="../2016/jiagou.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         乐高整体架构
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="animation/animation.html">
            
                
                    <a href="../animation/animation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         CSS动画
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2" data-path="lego/index.html">
            
                
                    <a href="../lego/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                         乐高前端解决方案
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.3" data-path="lego/index.html">
            
                
                    <a href="../lego/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                         乐高前端解决方案
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.4" data-path="lego/catalog.html">
            
                
                    <a href="../lego/catalog.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                         目录结构规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.5" data-path="lego/component.html">
            
                
                    <a href="../lego/component.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                         组件开发规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.6" data-path="lego/platform.html">
            
                
                    <a href="../lego/platform.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                         平台差异处理
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.7" data-path="lego/components.html">
            
                
                    <a href="../lego/components.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                         LEGO组件化
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.8" data-path="lego/react-native.html">
            
                
                    <a href="../lego/react-native.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                         React Native
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="raspbian/readMe.html">
            
                
                    <a href="../raspbian/readMe.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         树莓派
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1" data-path="raspbian/burn.html">
            
                
                    <a href="../raspbian/burn.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                         MacOS 烧录树莓派
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.2" data-path="raspbian/login.html">
            
                
                    <a href="../raspbian/login.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                         Raspbian的配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="5.3" data-path="raspbian/lamp.html">
            
                
                    <a href="../raspbian/lamp.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                         Raspbian安装Apache2/PHP5/MySQL5
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.4" data-path="raspbian/android.html">
            
                
                    <a href="../raspbian/android.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                         Raspbian的安卓应用
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >乐高</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_28">
                    
                        <h1 id="apache2php5mysql5">安装Apache2/PHP5/MySQL5</h1>
<h3 id="">准备篇</h3>
<blockquote>
<p>配置防火墙，开启80端口、3306端口</p>
<p>说明：debian默认安装是没有开启任何防火墙的，为了服务器的安全，建议大家安装启用防火墙设置，这里推荐使用iptables防火墙。</p>
</blockquote>
<pre><code>whereis iptables   #查看系统是否安装防火墙
iptables: /sbin/iptables /usr/share/iptables /usr/share/man/man8/iptables.8.gz  #表示已经安装iptables
apt-get install iptables   #如果默认没有安装，请运行此命令安装防火墙
iptables -L  #查看防火墙配置信息，显示如下：
#####################################################
Chain INPUT (policy ACCEPT)
target     prot opt source               destination

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination
#####################################################
nano /etc/iptables.default.rules    #添加以下内容
##################################################################################################
*filter
# Allows all loopback (lo0) traffic and drop all traffic to 127/8 that doesn&#39;t use lo0
-A INPUT -i lo -j ACCEPT
# Accepts all established inbound connections
-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
# Allows all outbound traffic
# You could modify this to only allow certain traffic
-A OUTPUT -j ACCEPT
# Allows HTTP and MySQLconnections from anywhere (the normal ports for websites)
-A INPUT -p tcp --dport 80 -j ACCEPT
-A INPUT -p tcp --dport 3306 -j ACCEPT
# Allows SSH connections for script kiddies
# THE -dport NUMBER IS THE SAME ONE YOU SET UP IN THE SSHD_CONFIG FILE
-A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT
# Now you should read up on iptables rules and consider whether ssh access
# for everyone is really desired. Most likely you will only allow access from certain IPs.
# Allow ping
-A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT
# log iptables denied calls (access via &#39;dmesg&#39; command)
-A INPUT -m limit --limit 5/min -j LOG --log-prefix &quot;iptables denied: &quot; --log-level 7
# Reject all other inbound - default deny unless explicitly allowed policy:
-A INPUT -j REJECT
-A FORWARD -j REJECT
COMMIT
##################################################################################################
ctrl+o  #保存
ctrl+x  #退出
备注：80是指web服务器端口、3306是指MySQL数据库链接端口、22是指SSH远程管理端口
iptables-restore &lt; /etc/iptables.default.rules    #使防火墙规则生效
nano  /etc/network/if-pre-up.d/iptables   #创建文件，添加以下内容，使防火墙开机启动
##########################################################
#!/bin/bash
/sbin/iptables-restore &lt;/etc/iptables.default.rules
##########################################################
chmod 777 /etc/network/if-pre-up.d/iptables  #添加执行权限
</code></pre><h3 id="">安装篇</h3>
<pre><code>apt-get install apache2    #安装apache，根据提示输入y安装
service apache2 start  #启动apache
service apache2 restart  #重启
apt-get install chkconfig  #安装chkconfig
chkconfig  apache2  on   #开机启动apache
apt-get install  mysql-server   #安装mysql，根据提示输入y安装
安装过程中，会跳出输入root密码的界面
输入2次密码，继续自动安装
service mysql start   #启动
chkconfig mysql on    #开机启动mysql
service mysql restart   #重启
</code></pre><h3 id="php">安装PHP</h3>
<pre><code>1、apt-get  install php5   #安装php5，根据提示输入y安装
2、安装PHP组件，使PHP支持 MySQL
apt-get install php5-mysql php5-gd libjpeg8-dev php5-imap php5-ldap php5-odbc php*-pear php*-xml php5-xmlrpc  php5-mcrypt  php5-mhash libmcrypt* libmcrypt-dev php-fpdf php5-imap
/etc/init.d/mysql restart  #重启mysql
/etc/init.d/apache2 restart #重启apache2
ln -s /etc/php5/apache2/php.ini  /etc/php.ini  #把php配置文件链接到系统默认位置
</code></pre><h3 id="">配置篇</h3>
<pre><code>一、Apache配置
cp /etc/apache2/apache2.conf  /etc/apache2/apache2.confbak   #备份
nano   /etc/apache2/apache2.conf  #编辑
ServerTokens Prod     #在出现错误页的时候不显示服务器操作系统的名称
ServerSignature Off   #在在错误页中不显示apache2的版本
MaxKeepAliveRequests 1000  #修改为1000（默认为100，增加同时连接数）
ctrl+o  #保存
ctrl+x  #退出
nano /etc/apache2/sites-enabled/000-default #编辑
Options MultiViews FollowSymLinks  #不在浏览器上显示树状目录结构
ctrl+o  #保存
ctrl+x  #退出
a2enmod rewrite   #激活apache2伪静态模块mod rewrite
二、配置php
nano  /etc/php5/apache2/php.ini   #编辑
date.timezone = PRC     #在946行 把前面的分号去掉，改为date.timezone = PRC
disable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restore,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,getservbyname,getservbyport,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd, posix_getegid,posix_geteuid,posix_getgid, posix_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid, posix_getppid,posix_getpwnam,posix_getpwuid, posix_getrlimit, posix_getsid,posix_getuid,posix_isatty, posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid, posix_setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname
#在386行 列出PHP可以禁用的函数，如果某些程序需要用到这个函数，可以删除，取消禁用。
expose_php = Off        #在432行 禁止显示php版本的信息
magic_quotes_gpc = On   #在745行 打开magic_quotes_gpc来防止SQL注入
open_basedir = .:/tmp/  #在380行，设置表示允许访问当前目录(即PHP脚本文件所在之目录)和/tmp/目录,可以防止php木马跨站，如果改了之后安装程序有问题，可注销此行，或者直接写上程序目录路径/var/www/www.osyunwei.com/:/tmp/
ctrl+o  #保存
ctrl+x  #退出
测试篇
cd /var/www  #进入默认站点目录
nano index.php   #新建测试文件
&lt;?php
phpinfo();
?&gt;
ctrl+o  #保存
ctrl+x  #退出
chown www-data.www-data -R  /var/www   #添加目录所有者
chmod 700  -R  /var/www  #设置目录权限
在客户端浏览器输入服务器IP地址，可以看到相关的配置信息！
备注：
apache2默认站点目录是：/var/www
权限设置：chown www-data.www-data -R  /var/www
apache2虚拟主机配置文件：/etc/apache2/sites-enabled/000-default   #虚拟主机配置文件
MySQL数据库目录是：/var/lib/mysql
权限设置：chown mysql.mysql -R  /var/lib/mysql
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../raspbian/login.html" class="navigation navigation-prev " aria-label="Previous page: Raspbian的配置"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../raspbian/android.html" class="navigation navigation-next " aria-label="Next page: Raspbian的安卓应用"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
